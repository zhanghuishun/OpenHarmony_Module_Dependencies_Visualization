# OpenHarmony组件依赖可视化
根据OpenHarmony仓库介绍，架构为系统-子系统-组件，开发人员依据需要选取不同子系统使用。可视化的目的为呈现出不同组件之间存在的依赖关系，帮助开发人员更快地了解自己的系统架构和依赖关系。这里选择了一个小型标准系统可能选取的所有子系统及组件作为样例演示（模拟数据由DeepSeek提供），用分层边捆绑图（Hierarchical Edge Bundling）呈现。
![image](https://github.com/user-attachments/assets/287642cd-3720-4e7e-8470-8f339475f920)

## TODO LIST
- [x] 选中后不能展示模块标签
- [ ] 整体主题样式探索
- [x] json文件读取
- [ ] 耦合度功能展示
- [ ] 模块依赖关系列表展示

## Prompt attempts:
### first attempt
我希望创建一个分层边捆绑（hierarchical edge bundling）的可视化，用来查看OpenHarmony各模块之间的依赖关系，模块由弧形的有宽度的边表示，模块有两个层级（子系统、模块），外层弧形代表子系统，内层弧形代表模块，每个子系统中包含3~10个模块。能支持基础的搜索功能，选中搜索结果后高亮对应的模块和依赖关系线。
### second attempt
布局调整：
1）去掉h1标题
2）图例和操作说明放到一个文字按钮里，文字按钮名为操作说明，位置放到可视化图形区域的右上角。
3）搜索位置放到可视化画布外的左上角。清除按钮变成取消icon放到搜索框内。
样式调整：
1）所有子系统填充颜色改为#ACC6FF，无边框，子系统之间留有一些间距。
2）所有模块填充颜色改为#D7E2FB，无边框，同一个子系统下的模块之间留有一些间距。
3）网页整体背景调整为浅色，适合展示#ACC6FF和#D7E2FB，有一定的对比度。
交互调整：
1）搜索后会自动高亮目标模块及其所有依赖关系时，模糊其他依赖关系线
### third attempt
布局调整：
1）搜索框的顶部和操作说明对齐。左侧距离画布有16px的距离。
2）子系统的弧正好能闭合，即首尾的间隔和其他相邻子系统的间隔弧度一样。
3）子系统下的所有模块所占的弧度和子系统的弧度一样，不会有超出和对不齐的情况。
4）整个可视化在画布居中位置。
交互调整：
1）支持鼠标单击选中模块，效果和搜索一样。
样式调整：
1）子系统之间的间距调整的更小一些，模块在子系统内均匀分布,相邻模块之间增加一点间隙，使得模块弧度和间隙弧度之和等于子系统弧度。
2）选中模块后，其他与该模块无依赖关系的连线，透明度降低，使得被选中的模块和依赖关系更加突出。
